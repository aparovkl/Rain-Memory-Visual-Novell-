define h = Character('Хару', color='#00ffe1')
define r = Character('Ринку', color='#ff8800')
define s = Character('Сакура', color='#e723c3')
define t = Character('Такеши', color='#651cc6')

#1 сцена
define FS_first = False
define FS_second = False
define FS_third = False

#2 сцена
define SS_first = False
define SS_second = False
define SS_third = False

#3 сцена
define TS_first = False
define TS_second = False
define TS_third = False


#4 сцена
define FoS_first = False
define FoS_second = False
define FoS_third = False

#5 сцена
define FiS_first = False
define FiS_second = False
define FiS_third = False

init:
    $ left2 = Position(xalign=0.2, yalign=1.1)
    $ right2 = Position(xalign=0.8, yalign=1.1)

label start:
    scene first
    show haru at right2
    show sakura at left2
    play music 'rain_sound.mp3'
    with fade

    s 'Ты меня избегаешь? Мы ведь даже не знакомы.'
    h 'Извини, это странно, но… я точно где-то тебя видел. В каком-то сне… или в другом времени.'
    s 'Сон? Забавно. Может, мы действительно встречались. Но это было так давно, что ты забыл?'
    menu:
        'Как ответит Хару?'

        'Да, я видел тебя во сне. Это было так странно.':
            s 'Странно… Но, может, это знак? Ты не думал, что наши судьбы переплетены?'
            h 'Возможно… Но почему я ничего не помню?'
            $ FS_first = 'Да, я видел тебя во сне. Это было так странно.'
            $ FS_second = False
            $ FS_third = False
        'Почему ты так уверена, что мы не встречались?':
            s 'Я просто чувствую, что ты — незнакомец. Но есть что-то в тебе, что заставляет меня задуматься.'
            h 'Может, ты права. Я тоже чувствую, что мы связаны.'
            $ FS_second = 'Почему ты так уверена, что мы не встречались?'
            $ FS_third = False
            $ FS_first = False
        'Может, ты просто похожа на кого-то, кого я знаю.':
            s 'Похоже, у тебя есть причина не доверять мне. Я просто хочу, чтобы ты знал: я не опасна.'
            h 'Прости, не хотел тебя обидеть. Просто странно.'
            $ FS_third = 'Может, ты просто похожа на кого-то, кого я знаю.'
            $ FS_first = False
            $ FS_second = False
    jump second_scene


label second_scene:
    scene second
    show haru at right2
    play music 'rain_sound.mp3'
    with fade

    h 'Что это? Почему я это вижу снова? Это… это я?'

    show sakura at left2
    with dissolve

    h 'Стой! Подожди! Я… Я тебя знаю!'

    hide sakura
    with fade

    show sakura
    with fade

    s 'Ты в порядке? Ты выглядишь так, будто что-то вспомнил.'
    menu:
        'Как Хару отреагирует?'

        'Я видел девочку… Она плакала.':
            s 'Девочка? Ты уверен? Это может быть связано с твоей памятью.'
            h 'Я… не знаю. Но я чувствую, что она важна.'
            $ SS_first = 'Я видел девочку… Она плакала.'
            $ SS_second = False
            $ SS_third = False
        'Мне показалось, что я был там.':
            s 'Это может быть. Быть может, твоя душа знает больше, чем ты сам.'
            h 'Я хочу это узнать, но как?'
            $ SS_second = 'Мне показалось, что я был там.'
            $ SS_first = False
            $ SS_third = False
        'Это не имеет значения. Я просто хочу понять, что происходит.':
            s 'Если ты не готов это принять, возможно, нам стоит немного отдохнуть.'
            h 'Прости, я не хотел тебя огорчить.'
            $ SS_third = 'Это не имеет значения. Я просто хочу понять, что происходит.'
            $ SS_first = False
            $ SS_second = False
    jump third_scene

label third_scene:
    scene third
    show takeshi at right2
    show haru at left2
    play music 'rain_sound.mp3'
    with fade

    t 'Ты снова думаешь о Сакуре? Она кажется странной.'
    h 'Да, я чувствую, что она связана с моим прошлым, но не могу понять, как…'
    menu:
        'Как Хару поступит?'

        'Что ты думаешь о том, чтобы поговорить с ней?':
            t 'Это хорошая идея. Может, она сможет прояснить ситуацию.'
            h 'Да, мне нужно знать правду.'
            $ TS_first = 'Что ты думаешь о том, чтобы поговорить с ней?'
            $ TS_second = False   
            $ TS_third = False
        'Мне нужно знать, что произошло тогда. Может, ты знаешь что-то?':
            t 'Я слышал истории… о твоем детстве. Может, это поможет тебе вспомнить.'
            h 'Какие истории?'
            $ TS_first = False
            $ TS_second = 'Мне нужно знать, что произошло тогда. Может, ты знаешь что-то?'
            $ TS_third = False
        'Я просто хочу оставить всё это позади.':
            t 'Если ты так думаешь, я поддержу тебя. Но ты не можешь просто игнорировать это.'
            h 'Я знаю, но это слишком тяжело.'
            $ TS_first = False
            $ TS_second = False
            $ TS_third = 'Я просто хочу оставить всё это позади.'
    jump fourth_scene
label fourth_scene:
    scene fourth
    show sakura at left2
    show haru at right2
    play music 'rain_sound.mp3'
    with fade

    s 'Твоя память возвращается. Но, Хару… чтобы вспомнить всё, ты должен отпустить меня.'
    h 'Я не могу! Ты… ты часть меня. Я не могу забыть тебя снова!'
    menu:
        'Как Хару ответит?'

        'Как я могу отпустить тебя? Я люблю тебя!':
            s 'Ты правда так думаешь? Это значит, что у нас есть шанс.'
            h 'Я не могу представить свою жизнь без тебя.'
            $ FoS_first = 'Как я могу отпустить тебя? Я люблю тебя!'
            $ FoS_second = False
            $ FoS_third = False
        'Я должен знать правду! Что случилось в тот день?':
            s 'Это связано с аварией… Тебе нужно быть готовым к тому, что ты узнаешь.'
            h 'Я готов. Скажи мне.'
            $ FoS_first = False
            $ FoS_second = 'Я должен знать правду! Что случилось в тот день?'
            $ FoS_third = False
        'Ты была всего лишь сном. Я должен вернуться в реальный мир.':
            s 'Я не просто сон! Я часть твоего прошлого, Хару!'
            h 'Прости, я не хотел тебя обидеть.'
            $ FoS_first = False
            $ FoS_second = False
            $ FoS_third = 'Ты была всего лишь сном. Я должен вернуться в реальный мир.'
    jump fifth_scene

label fifth_scene:
    scene fifth
    show sakura at left2
    show haru at right2
    play music 'rain_sound.mp3'
    with fade

    s 'Мы всегда были вместе. Просто я — это то, что ты потерял. Чтобы двигаться дальше, ты должен решить…'
    menu:
        'Как Хару поступит?'

        'Я остаюсь с тобой, где бы это ни было.':
            s 'Ты правда это имеешь в виду? Я думала, ты уйдёшь.'
            h 'Я не могу тебя оставить.'
            $ FiS_first = 'Я остаюсь с тобой, где бы это ни было.'
            $ FiS_second = False
            $ FiS_third = False
        'Я вернусь в реальный мир. Ты заслуживаешь лучшего.':
            s 'Если это твой выбор… Я не могу тебя удерживать.'
            h 'Это тяжело, но я должен это сделать.'
            $ FiS_first = False
            $ FiS_second = 'Я вернусь в реальный мир. Ты заслуживаешь лучшего.'
            $ FiS_third = False
        'Я найду способ соединить наши миры.':
            s 'Это будет нелегко, но если кто-то и сможет это сделать, так это ты.'
            h 'Я сделаю всё возможное, чтобы это осуществить.'
            $ FiS_first = False
            $ FiS_second = False
            $ FiS_third = 'Я найду способ соединить наши миры.'
    jump ending

label ending:
    scene black
    with fade

    if FS_first == 'Да, я видел тебя во сне. Это было так странно.' and SS_first == 'Я видел девочку… Она плакала.' and FoS_first == 'Как я могу отпустить тебя? Я люблю тебя!' and FiS_first == 'Я остаюсь с тобой, где бы это ни было.':
        'Пооооздравляю! Ты прошел на любовную концовку!❤️'
    elif FS_third == 'Может, ты просто похожа на кого-то, кого я знаю.' and SS_third == 'Это не имеет значения. Я просто хочу понять, что происходит.' and FoS_third == 'Ты была всего лишь сном. Я должен вернуться в реальный мир.' and FiS_second == 'Я вернусь в реальный мир. Ты заслуживаешь лучшего.':
        'Пооооздравляю! Ты прошел на печальную концовку.😔'
    elif FS_second == 'Почему ты так уверена, что мы не встречались?' and TS_second == 'Мне нужно знать, что произошло тогда. Может, ты знаешь что-то?' and FoS_second == 'Я должен знать правду! Что случилось в тот день?' and FiS_third == 'Я найду способ соединить наши миры.':
        'Пооооздравляю! Ты прошел на сложную концовку! 🤗'
    else:
        'Пооооздравляю! Ты прошел на нейтральную концовку.😐'
    'Если ты хочешь поиграть в ее продолжение, то жди выход DLC!'
    'О прогрессе создания ты можешь узнать у разработчика игры.'
    'Дискорд - minelove1'
    'Телеграмм - @Garma23'
    return